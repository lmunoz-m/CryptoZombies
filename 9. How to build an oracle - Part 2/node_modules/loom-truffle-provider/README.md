# Loom Truffle Provider

Adapter that allows Truffle Suite to communicate with a Loom DappChain.

## Install

```bash
yarn add loom-truffle-provider
# or
npm install loom-truffle-provider
```

## Requirements

```
Node >= 8
```

## Truffle

```
npm install -g truffle@4.1.8
```

## Current limitations

* Loom Truffle Provider is currently compatible only with Truffle `v4.1.8`. Support for newer versions
  will be added soon.
* Only one account is available for testing and deployment, the one associated with the private key.

## Description

Loom Truffle Provider makes it possible to deploy smart contracts written in Solidity on a Loom
DappChain. Here's an example Truffle configuration that uses the Loom Truffle Provider...

```javascript
// truffle.js
const { readFileSync } = require('fs')
const LoomTruffleProvider = require('loom-truffle-provider')

const chainId    = 'default'
const writeUrl   = 'ws://127.0.0.1:46657/websocket'
const readUrl    = 'ws://127.0.0.1:9999/queryws'

// ./privateKey file contains a base64 encoded key generated by the command:
// loom genkey -a publicKey -k privateKey
const privateKey = readFileSync('./privateKey', 'utf-8')

const loomTruffleProvider = new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey)

module.exports = {
  networks: {
    loomdappchain: {
      provider: function() {
        return loomTruffleProvider
      }, network_id: '*'
    }
  }
};
```

## Notes

* Make sure a Loom DappChain node is running before executing any Truffle commands.
* The Truffle `network` option must be set to `loomdapchain` when using the example configuration
  above, e.g. `truffle deploy --network loomdappchain`.
